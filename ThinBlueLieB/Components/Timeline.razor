@using DataAccessLibrary.DataModels;
@using static ThinBlueLieB.Helper.Extensions
@inject NavigationManager MyNavigationManager

<div onclick="PrevWeek()" id="triangle-left"> <div class="empty"></div></div>
@*@foreach ((var day, Int32 i) in Day.Select((day, i) => (day, i)))
{
    <div class="week btn" onclick='location.href = "?d=@Dates[i].Year-@Dates[i].Month.ToString().PadLeft(2, '0')-@Dates[i].Day.ToString().PadLeft(2, '0')"'>
        <div class="timeline-label">
            <span>@Dates[i].DayOfWeek</span>
            <span> @Dates[i].Month/@Dates[i].Day</span>
        </div>
        <div class="badge-bar">
            <svg class="badge">
                <circle cx="13" cy="13" r="12" stroke="DarkBlue" stroke-width="2" fill="#dedede" />
                <text x="8" y="18" fill="black">@day.Count</text>
            </svg>
        </div>
        <input type="radio">
    </div>
}*@
<div onclick="NextWeek()" id="triangle-right"><div class="empty"></div></div>

@code {
public string date { get; set; }
public async Task GetTimeline(string? current, int? dateChange)
{
    //string[] weekDays = { "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" };
    if (current != null && dateChange != null){
        date = Convert.ToDateTime(current).AddDays((double)dateChange).ToString("yyyy-MM-dd");
    }
    else if (date == null | string.IsNullOrWhiteSpace(GetQueryParm("d"))){
        date = DateTime.Today.ToString("yyyy-MM-dd");
    }
    else
    {
        date = GetQueryParm("d");
    }
    DateTime dateT = Convert.ToDateTime(date); //convert date from string to DateTime
    DateTime[] dates = new DateTime[7];
    var weekStart = dateT.AddDays(-(int)dateT.DayOfWeek); //week start date
    if (dateChange == null)
    {
        dates[0] = dateT.AddDays(-(int)dateT.DayOfWeek);
    }
    else
    {
        dates[0] = dateT.AddDays(-(int)dateT.DayOfWeek);
    }
    for (int i = 1; i < 7; i++)
    {
        dates[i] = weekStart.AddDays(i);
    }
    var dateData = new List<List<Timelineinfo>>(new List<Timelineinfo>[7]);
    for (int i = 0; i < 7; i++)
    {
        //get data
    }

}
}
